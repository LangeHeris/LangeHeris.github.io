<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SSR 搭建与免流 | Soul Stream</title><meta name="description" content="前言 服务端系统是CentOS 6/7 （建议用CentOS6） 具体调试，需要一点Linux基础，还有计算机网络知识。 免流包含参数指导。 资源来源于百度。 什么是免流漏洞？三大运营商流量计费检测系统漏洞，有些客户会对此漏洞加以利用从而使用远远超出其套餐的流量，倘若漏洞扩大，会使运营商损失过大。 通俗地讲，就是将手机正常的上网的数据伪装成是使用运营商免流量服务的数据，从而欺骗运营商的流量计费系"><meta name="keywords" content="教程,SSR,VPN"><meta name="author" content="Lange Heris"><meta name="copyright" content="Lange Heris"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="https://hm.baidu.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="bKYNYaC3N5"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="SSR 搭建与免流"><meta name="twitter:description" content="前言 服务端系统是CentOS 6/7 （建议用CentOS6） 具体调试，需要一点Linux基础，还有计算机网络知识。 免流包含参数指导。 资源来源于百度。 什么是免流漏洞？三大运营商流量计费检测系统漏洞，有些客户会对此漏洞加以利用从而使用远远超出其套餐的流量，倘若漏洞扩大，会使运营商损失过大。 通俗地讲，就是将手机正常的上网的数据伪装成是使用运营商免流量服务的数据，从而欺骗运营商的流量计费系"><meta name="twitter:image" content="https://preview.cloud.189.cn/image/imageAction?param=B156D289809DB088F20B08DE154CEB9F87319BD80C69DC67157607A5B39AB353DA61A9DF1ECC0F0B64D619C33C2DE5125CC9684890FDA9A18845FACAC818F806011A837E7CBD005E08BD51EB4BA270CB01E5F26F83E1D37967C8DDCD"><meta property="og:type" content="article"><meta property="og:title" content="SSR 搭建与免流"><meta property="og:url" content="http://langeheris.github.io/2020/05/01/ssr/"><meta property="og:site_name" content="Soul Stream"><meta property="og:description" content="前言 服务端系统是CentOS 6/7 （建议用CentOS6） 具体调试，需要一点Linux基础，还有计算机网络知识。 免流包含参数指导。 资源来源于百度。 什么是免流漏洞？三大运营商流量计费检测系统漏洞，有些客户会对此漏洞加以利用从而使用远远超出其套餐的流量，倘若漏洞扩大，会使运营商损失过大。 通俗地讲，就是将手机正常的上网的数据伪装成是使用运营商免流量服务的数据，从而欺骗运营商的流量计费系"><meta property="og:image" content="https://preview.cloud.189.cn/image/imageAction?param=B156D289809DB088F20B08DE154CEB9F87319BD80C69DC67157607A5B39AB353DA61A9DF1ECC0F0B64D619C33C2DE5125CC9684890FDA9A18845FACAC818F806011A837E7CBD005E08BD51EB4BA270CB01E5F26F83E1D37967C8DDCD"><meta property="article:published_time" content="2020-04-30T16:00:00.000Z"><meta property="article:modified_time" content="2020-06-04T15:49:54.746Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = 'false'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://langeheris.github.io/2020/05/01/ssr/"><link rel="prev" title="JavaScript 继承模式 数组去重 深度克隆" href="http://langeheris.github.io/2020/06/01/JS01/"><link rel="next" title="Git 版本控制" href="http://langeheris.github.io/2020/04/17/Git/"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?009444a024f29811d7378276af465b8e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-160039268-1', 'auto');
ga('send', 'pageview');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://langeheris.github.io/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.jpg'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">9</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">17</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">6</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="http://tool.langeheris.top:81" target="_blank" rel="noopener"><i class="fa-fw fa fa-map"></i><span> WEB导航</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 视频</span></a></li><li><a class="site-page" href="http://47.92.32.195:8080" target="_blank" rel="noopener"><i class="fa-fw fa fa-cloud-upload"></i><span> NPS端口</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text"> 前言 </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是免流漏洞？"><span class="toc-number">1.1.</span> <span class="toc-text">什么是免流漏洞？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么会有免流漏洞？"><span class="toc-number">1.2.</span> <span class="toc-text">为什么会有免流漏洞？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#漏洞种类"><span class="toc-number">1.3.</span> <span class="toc-text">漏洞种类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#目前常见免流方法"><span class="toc-number">1.4.</span> <span class="toc-text">目前常见免流方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#免流方式"><span class="toc-number">1.4.1.</span> <span class="toc-text">免流方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#各免流模式的欺骗原理"><span class="toc-number">1.4.2.</span> <span class="toc-text">各免流模式的欺骗原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#防跳原理"><span class="toc-number">1.4.3.</span> <span class="toc-text">防跳原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WiFi托电脑免流"><span class="toc-number">1.4.4.</span> <span class="toc-text">WiFi托电脑免流</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-the-SSR"><span class="toc-number">1.5.</span> <span class="toc-text">What is the SSR ?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#why-use-the-SSR"><span class="toc-number">1.6.</span> <span class="toc-text">why use the SSR ?</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SSR服务端搭建"><span class="toc-number">2.</span> <span class="toc-text"> SSR服务端搭建 </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SSR-常用命令"><span class="toc-number">2.1.</span> <span class="toc-text">SSR 常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结："><span class="toc-number">2.2.</span> <span class="toc-text">总结：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#混淆与协议配置"><span class="toc-number">3.</span> <span class="toc-text"> 混淆与协议配置 </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#协议定义与混淆插件含义"><span class="toc-number">3.1.</span> <span class="toc-text">协议定义与混淆插件含义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#混淆插件"><span class="toc-number">3.1.1.</span> <span class="toc-text">混淆插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#协议定义插件"><span class="toc-number">3.1.2.</span> <span class="toc-text">协议定义插件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#混淆与协议配置建议"><span class="toc-number">3.2.</span> <span class="toc-text">混淆与协议配置建议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#关于混淆的选择"><span class="toc-number">3.2.1.</span> <span class="toc-text">关于混淆的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-simple"><span class="toc-number">3.2.2.</span> <span class="toc-text">http_simple</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tls1-2-ticket-auth"><span class="toc-number">3.2.3.</span> <span class="toc-text">tls1.2_ticket_auth</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#混淆常用Host"><span class="toc-number">3.2.4.</span> <span class="toc-text">混淆常用Host</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#国外域名混淆"><span class="toc-number">3.2.4.1.</span> <span class="toc-text">国外域名混淆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#国内域名混淆"><span class="toc-number">3.2.4.2.</span> <span class="toc-text">国内域名混淆</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#免流混淆参数获取"><span class="toc-number">3.3.</span> <span class="toc-text">免流混淆参数获取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#packet-capture抓包教程"><span class="toc-number">3.3.1.</span> <span class="toc-text">packet capture抓包教程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#混淆的正确写法"><span class="toc-number">3.4.</span> <span class="toc-text">混淆的正确写法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SS配置"><span class="toc-number">3.4.1.</span> <span class="toc-text">SS配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSR配置"><span class="toc-number">3.4.2.</span> <span class="toc-text">SSR配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#混淆问题：为什么不用tls"><span class="toc-number">3.4.2.0.1.</span> <span class="toc-text">混淆问题：为什么不用tls</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#加密问题：为什么用none"><span class="toc-number">3.4.2.0.2.</span> <span class="toc-text">加密问题：为什么用none</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#常见问题解决方案——参考"><span class="toc-number">4.</span> <span class="toc-text"> 常见问题解决方案——参考 </span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SSR加速方案"><span class="toc-number">5.</span> <span class="toc-text"> SSR加速方案 </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#方案一：锐速加速（仅支持KVM-Xen-vmare架构）"><span class="toc-number">5.1.</span> <span class="toc-text">方案一：锐速加速（仅支持KVM,Xen,vmare架构）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方案二：BBR加速（仅支持KVM-Xen-vmare架构，且不可与锐速共存）"><span class="toc-number">5.2.</span> <span class="toc-text">方案二：BBR加速（仅支持KVM,Xen,vmare架构，且不可与锐速共存）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其余方案"><span class="toc-number">5.3.</span> <span class="toc-text">其余方案</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考文章"><span class="toc-number">6.</span> <span class="toc-text"> 参考文章 </span></a></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div class="post-bg" id="nav" style="background-image: url(https://preview.cloud.189.cn/image/imageAction?param=3FACB5AA38B71CC5DFE2A77DC43B4266BBE9D6CA9EF96D92198785668003BD9198A8346D80D115C35A64A898A06030023CE6F88CCF1D7ED630F6E1EADB14067DA4F3CCEFB60BF8B6C0CB0073590482D4D5B9CB1FDEE63568F84B3523)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Soul Stream</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="http://tool.langeheris.top:81" target="_blank" rel="noopener"><i class="fa-fw fa fa-map"></i><span> WEB导航</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 视频</span></a></li><li><a class="site-page" href="http://47.92.32.195:8080" target="_blank" rel="noopener"><i class="fa-fw fa fa-cloud-upload"></i><span> NPS端口</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">SSR 搭建与免流</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-05-01 00:00:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-05-01</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-04 23:49:54"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-04</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%95%99%E7%A8%8B/">教程</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">10.1k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 32 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2020/05/01/ssr/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/05/01/ssr/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h1 id="前言"><a href="#前言" class="headerlink" title=" 前言 "></a><center> 前言 </center></h1><p>服务端系统是CentOS 6/7 （建议用CentOS6）</p>
<p>具体调试，需要一点Linux基础，还有计算机网络知识。</p>
<p>免流包含参数指导。</p>
<p><strong>资源来源于百度。</strong></p>
<h2 id="什么是免流漏洞？"><a href="#什么是免流漏洞？" class="headerlink" title="什么是免流漏洞？"></a>什么是免流漏洞？</h2><p>三大运营商流量计费检测系统漏洞，有些客户会对此漏洞加以利用从而使用远远超出其套餐的流量，倘若漏洞扩大，会使运营商损失过大。</p>
<p>通俗地讲，就是将手机正常的上网的数据伪装成是使用运营商免流量服务的数据，从而欺骗运营商的流量计费系统，实现免流。</p>
<h2 id="为什么会有免流漏洞？"><a href="#为什么会有免流漏洞？" class="headerlink" title="为什么会有免流漏洞？"></a>为什么会有免流漏洞？</h2><p>运营商为了给客户提供方便，提供了一些优惠政策，如：接收彩信、登陆掌厅免除流量费以及免收取流量费的其他业务。<br>一些用户通过Squid+OpenVPN自身的HTTP代理自定义服务器http请求头信息为运营商网站，当系统检测到请求头属于访问运营商网站的数据，用户即可达到免费上网的目的。</p>
<p>运营商的计费系统为了区分用户使用的是免流量业务还是正常访问互联网会把这些免流服务的网址加入到白名单，这些白名单中的网址就是我们平常所说的免流IP了，当计费系统检测到用户访问的是白名单中的网址或接收彩信时就不会进行扣费。</p>
<p>问题就出在检测上了，各运营商、各地区的检测方式都不尽相同，而且并不完善，这就形成了免流的出现和不同的免流模式以及地区的限制。</p>
<p>那么计费系统是如何检测的呢？当用户访问互联网时，会向服务器发送一条请求信息(请求头)，这个请求头中包含了网络服务器与用户的所有交互信息如：访问的网址、UA、网络协议、主机(host)、Cookie、来源地址、文件类型等很多信息。计费系统通过检测请求头来分辨用户访问的是不是白名单中的网址或者是接收彩信。但是计费系统检测的是用户发来的请求信息，这条信息是来自于用户的，也就是说通过自定义该信息可以达到欺骗计费检测以达到免流上网的目的.</p>
<h2 id="漏洞种类"><a href="#漏洞种类" class="headerlink" title="漏洞种类"></a>漏洞种类</h2><p>最开始的漏洞有两种:</p>
<p>一种是用户登陆运营商官网免流，利用这个免流漏洞，用脚本去伪造http请求头信息欺骗运营商现在进的网站是运营商的网站，达到免流效果。</p>
<p>一种是利用彩信联网下载彩信内容免流，利用这个漏洞，配置手机浏览器的代理服务器，模拟成彩信的代理端口，来欺骗运营商现在是在下载彩信，达到免流效果。</p>
<p>还有一种活的时间时间不太长的漏洞：类似于短信刷钻漏洞一样，针对早间运营商短信系统，扣费系统机制的不完善，通过短信欺骗开通大流量包，低价开通高价流量包，或者免费开通高价流量包。</p>
<p>漏洞经常的被和谐，新的漏洞不断的又被暴露。</p>
<p>发展到现在，漏洞基本都是针对运营商对某款APP，某个网站免流，然后去模拟欺骗运营商访问的网站是免流网站。</p>
<p>这一块技术发展的倒是蛮快的从开始诺基亚py脚本，到安卓搭建本地免流代理服务器，再到用服务器搭建VPN服务器，手机代理服务器，设置免流脚本达到商业化。</p>
<p>VPN免流时代，已经很商业化、工业化了，有专业的VPN免流搭建方案提供商，完整的流量计费系统，用户系统，APP源码…，购买方案后，即可自行搭建免流VPN服务器，再生成APP，提供给用户，收取用户费用。</p>
<p>免流软件的发行商搭建简单，维护简单，用户使用同样简单。两者都不需要进行繁杂的配置，就可达到想要的效果。</p>
<h2 id="目前常见免流方法"><a href="#目前常见免流方法" class="headerlink" title="目前常见免流方法"></a>目前常见免流方法</h2><p>早期各种躲避运营商流量计费的方法是传统的“免流”。</p>
<p>各大运营商也不是待宰的羔羊，也会通过技术手段进行过滤和屏蔽，这样就导致了极大一部分传统的“免流”技术只是在某些情况下可以使用，比如QQ微信聊天可以，但是优酷视频就不行。</p>
<p>然后现在又有了一种新的“免流”技术，称之为“云免流”。听起来很高大上，其实原理很简单。</p>
<p>以OpenVPN为例：</p>
<p>各大运营商为了方便用户进行流量查询、缴费等操作，设置了当用户浏览一部分运营商自己的网站时不需要耗费流量，而各大运营商识别用户访问的网址是否为这部分网址时，出现了问题，导致识别错误，主要是这个X-Online-Host字段上的问题。<br>当用户通过OpenVPN免流时，在你的VPS和移动设备之间打通一个隧道，你的所有网络请求都先经过OpenVPN传给VPS，然后VPS把你请求的东西拿到之后又通过OpenVPN传回来。免流的关键就在于，每次利用OpenVPN发起网络请求之前，都要对请求头进行伪装，加上X-Online-Host字段，让运营商认为你请求的是运营商自己的免流量网站。</p>
<p>PS：客户端真正的访问地址是一个HTTP代理，由HTTP代理连接vpn，x-online-host只是连接http代理的http协议头中增加的一个字段，只是用于欺骗计费系统。</p>
<p>Open具体实现方法：<a href="https://www.gaojinan.com/vps-openvpn-china-telecom-unicom-mobile-mianliu-ml.html" target="_blank" rel="noopener">在VPS上搭建OpenVPN实现移动联通电信三网免流</a></p>
<p>其他相关解释：</p>
<p>1、修改HTTP连接header:<br>这里需要了解运营商如何分辨手机走的流量是否为免流流量,目前采用的多是检查HTTP header,查看是否是指定的Host、UA等,具体免流方法为将手机流量中,每一个HTTP请求中,均加入能够免流的Host、UA、或者其他一些免流参数即可.</p>
<p>2、指定端口免流:<br>这个是比较早期的免流方法,目前在大多数地区均不可用,原理为使用ss、vpn等工具,通过指定的端口,如137/138/139等端口,即可免流.</p>
<p><strong>本文使用的是SSR免流！！！</strong></p>
<div class="hide-block"><a class="hide-button button--primary button--animated" style="color:#fff;">早期免流方式与原理
    </a><span class="hide-content"><h3 id="免流方式"><a href="#免流方式" class="headerlink" title="免流方式"></a>免流方式</h3><p>菊花点穴手：<br>一些手机软件大神直接修改软件的请求信息，最早的就是菊花大神了。他编写了一个java的网络请求类(http.class)，它负责发送能欺骗计费系统的网络请求头。菊花在请求头中把请求的网址(host)换成了免流的网址‘host:免流IP’，并在该信息后面添加了一条另一种表示网址的信息‘x-online-host:实际网址’。这样计费系统会检测到用户访问的是免流网址，但是网络服务器返回给用户的却是实际网址的网页，这是因为计费系统和网络服务器的不一致导致的。<br>菊花把http.class放到UC浏览器中，然后通过修改代码调用它，从此世界上就诞生了一个伟大的软件——菊花UC，后来人们把http.class提取出来，放到其他软件中并修改代码，这样其他Java软件也能免流了。安卓软件免流与这个类似。到2013年，运营商调整计费系统当出现这种情况时以x-online-host为准，从此世界上第一次出现了‘菊花和谐’这个词。</p><p>老虎会游泳：<br>老虎是一个PHP程序员，他用PHP开发了一个免流代理服务器系统，后来被别人修改并命名为XX免流系统。<br>PHP无法直接在安卓手机上运行，安装almp或anmpp后会把手机配置成一个PHP网站服务器。免流系统运行在网站的根目录(www文件夹)中，通过修改anmpp设置将网站接收的所有请求传给Proxy.php，这样就实现了把网站服务器变成代理服务器。这个代理服务器的IP就是127.0.0.1。我把它称之为本地代理。<br>通过修改APN把10.0.0.172改成127.0.0.1即可使数据走免流系统。但有些程序并不会去走这个代理，所以就出现了我们常说的跳点。<br>当用户通过本地代理上网时，用户发送的请求头会发给免流系统，免流系统接收到请求头后调用设置好的模式进行修改，之后再由免流系统把修改后的请求头发送给网络服务器达到免流上网的目的，俗称全局免流。</p><p>其他：<br>可以直接修改安卓系统，让安卓系统去修改网络请求信息。为什么老虎不这么做呢？因为他只会PHP。目前还没有民间的开发者能做得到。可能是未来免流的发展方向。</p><h3 id="各免流模式的欺骗原理"><a href="#各免流模式的欺骗原理" class="headerlink" title="各免流模式的欺骗原理"></a>各免流模式的欺骗原理</h3><p>菊花模式：<br>已和谐，这个的原理在上面讲过了，我这里想说的是在老虎开发的免流系统中，菊花模式的php文件后来被一些人修改成了好多种模式并以他网名来命名这种模式。</p><p>川免模式：<br>已和谐，在四川移动掌厅有一个免流下载的链接前缀，系统将请求头中的网址前面加上这个免流前缀实现免流量的目的，这种模式是前缀模式的一种，后来被修改成了华纳模式、错导模式等。</p><p>前缀免流比菊花免流出现的早，最初是用来免流下载。之后小毅(也是PHP程序员)的玖玩浏览器(压流网站)开创了通过前缀免流上网的时代。玖玩网是比较早的讨论免流的论坛了，现在听一个站长说已经被他网站合并了。现在玖玩浏览器扔然有人在用。</p><p>后缀模式：<br>已和谐，这个应该是联通的模式，某些地区的联通计费系统只要在请求的网址中检测到了wap.10010.com就认定为免流，所以免流系统在请求的网址后面加了个?wap.10010.com或&amp;wap.10010.com达到免流目的。</p><p>伪彩模式：<br>上文中讲过的，接收彩信是不花流量的，计费系统是通过判断请求头中的文件类型信息来判断彩信的，免流系统把文件类型信息改成application/vnd.wap.mms-message，这就把所有流量都伪装成了彩信，所以会免流。</p><p>双H模式：<br>我现在用的模式，这种模式和菊花类似，只是把菊花模式的x-online-host换成了host，即两个host。</p><p>其他</p><h3 id="防跳原理"><a href="#防跳原理" class="headerlink" title="防跳原理"></a>防跳原理</h3><p>禁网：<br>安全软件利用安卓系统内置的防火墙模块实现禁止应用连接互联网，因为跳点是不经过本地代理的，所以会连不上网。不跳点的软件是通过本地代理进行联网的，免流系统是运行于root之上，所以不会被禁网，这样免流的软件在禁网之后仍可以连接网络。</p><p>防跳脚本：<br>防跳脚本也是利用防火墙模块，所以会与禁网有冲突，不过防跳脚本不是单纯的禁网，它实现了智能化的防跳，脚本包含了设置防火墙的命令，它可以强制让不走本地代理的软件走代理即127.0.0.1，并且仍可以起到禁网的效果，对于那些免流系统不支持的协议如QQ，则可以进行排除以让其能够联网，实现半免。</p><h3 id="WiFi托电脑免流"><a href="#WiFi托电脑免流" class="headerlink" title="WiFi托电脑免流"></a>WiFi托电脑免流</h3><p>当全局免流的手机共享出WiFi热点，电脑连接后会与手机组成无线局域网，这时手机和电脑都会被分配一个局域网的IP，以192.168开头，手机的IP是192.168.43.1,因为手机被配置成了免流代理服务器，所以在电脑上设置代理为192.168.43.1就能走免流了，但必须开启手机防跳脚本或禁止电脑某些不走代理的软件联网，否则电脑也会跳点，手机禁网是没用的。</p></span></div>

<hr>
<h2 id="What-is-the-SSR"><a href="#What-is-the-SSR" class="headerlink" title="What is the SSR ?"></a>What is the SSR ?</h2><p>讲SSR之前必须要了解一下SS。</p>
<p><strong>Shadowsocks/SS：</strong> 作者是clowwindy，大约四年前，他自己为了翻墙，写了Shadowsocks，简称SS或者叫影梭。</p>
<p>他觉得这个东西非常好用，速度快，而且不会被封锁，就把源码共享在了github上。</p>
<p>后来被大伙儿所熟识和普遍应用，但听说火了之后作者被请去喝茶，删了代码，并且保证不再参与维护更新。现在好像是一个国外的大兄弟在维护。</p>
<p><img src="/" class="lazyload" data-src="http://img.doutula.com/production/uploads/image/2016/10/15/20161015498188_FAlBfp.jpg"  alt="dalao喝茶"></p>
<p><strong>ShadowsocksR/SSR：</strong> 在SS作者被喝茶之后，github上出现了一个叫breakwa11(破娃酱)的帐号，声称SS不够隐秘，容易被防火墙检测到。</p>
<p>所以在混淆和协议方面做了改进，更加不容易被防火墙检测到，而且兼容SS，改进后的项目叫Shadowsocks-R，简称SSR。</p>
<p>后来SS用户和SSR用户自然分成了两个派别，互相撕逼，直到前阵子，破娃被人肉出来后无奈删除SSR的代码，并且解散了所有相关群组。</p>
<p>目前已经停止开发，客户端由志愿者维护。</p>
<blockquote>
<p>其实SS和SSR它的原理都是一样的，就是socks5代理。socks代理只是简单的传递数据包，而不必关心是何种协议，所以socks代理比其他应用层代理要快的多。socks5代理是把你的网络数据请求通过一条连接你和代理服务器之间的通道，由服务器转发到目的地，这个过程中你是没有通过一条专用通道的，只是数据包的发出，然后被代理服务器收到，整个过程并没有额外的处理。通俗的说，现在你有一个代理服务器在香港，比如你现在想要访问google，你的电脑发出请求，流量通过socks5连接发到你在香港的服务器上，然后再由你在香港的服务器去访问google，再把访问结果传回你的电脑，这样就实现了翻墙。</p>
</blockquote>
<h2 id="why-use-the-SSR"><a href="#why-use-the-SSR" class="headerlink" title="why use the SSR ?"></a>why use the SSR ?</h2><p>SSR免流和OPENVPN免流一样，都属于云免，都要用服务器搭建。</p>
<p>不同的是SSR免流暂时没有成熟的流控，所以不适用于商业化，适合自用，相对于OPENVPN免流来说更简单。</p>
<p>而且由于协议的不同，SSR相对OPENVPN更省电、速度更快、不会被墙，缺点是混淆模式较单一，免流效果不如OPENVPN。</p>
<h1 id="SSR服务端搭建"><a href="#SSR服务端搭建" class="headerlink" title=" SSR服务端搭建 "></a><center> SSR服务端搭建 </center></h1><p>脚本下载：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget -N --no-check-certificate https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;ToyoDAdoubi&#x2F;doubi&#x2F;master&#x2F;ssr.sh &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh</span><br></pre></td></tr></table></figure>
<p>目前我在<strong>百度</strong>上能找到的脚本，仅此一家。（方便人民群众~ ）</p>
<p>复制上面的代码到VPS服务器里，按回车键，脚本会自动安装，以后只需要运行这个快捷命令就可以出现下图的界面进行设置，快捷管理命令为：<code>bash ssr.sh</code></p>
<p><img src="/" class="lazyload" data-src="https://preview.cloud.189.cn/image/imageAction?param=14E76F624E99580BB9DD229294507C5A07CBF73CC99E171D732061C90C07D0099C668C661F9B48DC859AFC956F1B163A03D34606E9CF76BA5F5317F49DB2DB47A8CE6E96737CD0362C8D7FEEEFEBE57369FEDE1BD64F89E873056CD5"  alt=""></p>
<p>按” 1 “回车，进行安装服务端。<br>如果输入1后不能进入下一步，那么请重新连接vps服务器，然后输入快捷管理命令<code>bash ssr.sh</code>再尝试。</p>
<p><img src="/" class="lazyload" data-src="https://preview.cloud.189.cn/image/imageAction?param=854EAF0B3A0DB323AA05530D8DED04A5D62102EE9DBEC2F12DC04F893F94C974063716DAB858DD77D491ECF290921794A7A5CAD70CF250BC7E7EA51B5A1947B7A5C023138F4423D3F2D848BCDEBACCCD022ED1D452D9DAD7830B109B"  alt=""><br>根据上图提示，依次输入自己想设置的端口和密码 (密码建议用复杂点的字母组合，端口号为40-65535之间的数字)，回车键用于确认。</p>
<p>注：关于端口的设置，总的网络总端口有6万多个，理论上可以任意设置。<br><strong>但是有的地区需要设置特殊的端口才有效，一些特殊的端口比如80、143、443、1433、3306、3389、8080。</strong></p>
<p>常见的免流端口有移动（8080,80）电信（8080,80）联通（8080,80,53(空中卡),130,131,132,155,156,185,186,145,176）</p>
<blockquote>
<p>53端口是DNS端口，适合空中卡使用，正常卡用会扣流量，就算你填写了可免的混淆参数也是会扣流量的。<br>所以，正常卡就不要用53端口，不管你是用SSR免流，还是其它形式的云免，都要记住，53端口只能空中卡用。</p>
</blockquote>
<blockquote>
<p>137和138端口是UDP端口，也是中国移动的直连免流端口。<br>只要是你使用的137/138端口代理会直接免流，不需要免流host。这是只是部分地区移动卡可免，具体情况自测。<br>137/138端口在联通网络中是无法联网的，所以，137/138端口的SSR不合适联通卡使用，电信卡任意。</p>
</blockquote>
<p><img src="/" class="lazyload" data-src="https://preview.cloud.189.cn/image/imageAction?param=50279757D1CBC2431D22FD01B9A0186CD80DB001A65BA428F74909B119DF6435A956CD7C55022C006D5978A881682027C9158A0C9B5BAD100BCB3F97A36B1D89E3784BCD2B1ADCD9657C81205652A7A344B7F42DF0194BC84BA15CC6"  alt=""></p>
<p>加密方式 选10 回车确认，接下来是选择协议插件。</p>
<p>选择并确认后，会出现上图的界面，提示你是否选择兼容原版，这里的原版指的是SS客户端（SS客户端没有协议和混淆的选项），可以根据需求进行选择，演示选择y</p>
<p><img src="/" class="lazyload" data-src="https://preview.cloud.189.cn/image/imageAction?param=AA4DC8D21BA5E1FBC8D20506C62226BE0ABA5752EDF841C107EA63C95EA240973EC79A21A1AA38AFB5C56C9D332E1E8573B39AAA26717079DFFB1922357B3B88F1D92799D9E2CE0ED07A40640C91CF57505AB38C9E6D6B8087C5E1CE"  alt=""></p>
<p>之后进行混淆插件的设置。 能用plain没问题就用plain，当在plain情况下你察觉到网络有异样，且你了解http_simple混淆参数的用途，再酌情使用http_simple。</p>
<p><strong>注意：如果协议是origin，那么混淆也必须是plain；如果协议不是origin，那么混淆可以是任意的。有的地区需要把混淆设置成plain才好用。因为混淆不总是有效果，要看各地区的策略，有时候不混淆（plain）让其看起来像随机数据更好。（特别注意：tls 1.2_ticket_auth容易受到干扰！请选择除tls开头以外的其它混淆！！！）</strong></p>
<p>进行混淆插件的设置后，会依次提示你对设备数、单线程限速和端口总限速进行设置，默认值是不进行限制，个人使用的话，选择默认即可，即直接敲回车键。</p>
<p>注意：关于限制设备数，这个协议必须是非原版且不兼容原版才有效，也就是必须使用SSR协议的情况下，才有效！</p>
<p>之后代码就正式自动部署了，到下图所示的位置，提示你下载文件，输入：y</p>
<p><img src="/" class="lazyload" data-src="https://preview.cloud.189.cn/image/imageAction?param=848DC8800E036B7110FCD4291689A09CB67C9A43807961FDEBFAB379AD1CF15418565C8521E5254518BA96D22F4B8BF25C88E851342DE8C9687816053C6C27F97C058A3198CB29BF9915C48B1C2B28C4E9DBB201E889403D0B6FEA8B"  alt=""></p>
<p>根据上图就可以看到自己设置的SSR账号信息，包括IP、端口、密码、加密方式、协议插件、混淆插件，这些信息需要填入你的SSR客户端。如果之后想修改账号信息，直接输入快捷管理命令：<code>bash ssr.sh</code>进入管理界面，选择相应的数字来进行一键修改。</p>
<p><strong>PS：不要试图白嫖我的服务器。</strong></p>
<p>此脚本是开机自动启动，部署一次即可。最后可以重启服务器确保部署生效（一般情况不重启也可以）。重启需要在命令栏里输入reboot ，输入命令后稍微等待一会服务器就会自动重启，一般重启过程需要2～5分钟，重启直接重连即可。</p>
<h2 id="SSR-常用命令"><a href="#SSR-常用命令" class="headerlink" title="SSR 常用命令"></a>SSR 常用命令</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">启动：&#x2F;etc&#x2F;init.d&#x2F;shadowsocks start</span><br><span class="line"></span><br><span class="line">停止：&#x2F;etc&#x2F;init.d&#x2F;shadowsocks stop</span><br><span class="line"></span><br><span class="line">重启：&#x2F;etc&#x2F;init.d&#x2F;shadowsocks restart</span><br><span class="line"></span><br><span class="line">状态：&#x2F;etc&#x2F;init.d&#x2F;shadowsocks status</span><br></pre></td></tr></table></figure>
<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p><strong>加密方式（method）选择aes-256-cfb；混淆方式（obfs）选择http_simple；协议（protocol）选择auth_sha1_v4。</strong></p>
<p><code>bash ssr.sh</code>进入管理界面。</p>
<h1 id="混淆与协议配置"><a href="#混淆与协议配置" class="headerlink" title=" 混淆与协议配置 "></a><center> 混淆与协议配置 </center></h1><h2 id="协议定义与混淆插件含义"><a href="#协议定义与混淆插件含义" class="headerlink" title="协议定义与混淆插件含义"></a>协议定义与混淆插件含义</h2><p>资料来源于<a href="https://github.com/shadowsocksrr/shadowsocks-rss/blob/master/ssr.md" target="_blank" rel="noopener">ShadowsocksR 协议插件文档</a></p>
<p>里面包含配置建议，该有的都有，不看你可能看不懂下面讲的。</p>
<p>以下部位为个人作业。建议直接去看开发者文档（哪怕看不懂）。</p>
<h3 id="混淆插件"><a href="#混淆插件" class="headerlink" title="混淆插件"></a>混淆插件</h3><p>（此类型的插件用于定义加密后的通信协议，通常用于协议伪装，部分插件能兼容原协议。）</p>
<ul>
<li>plain：表示不混淆，直接使用协议加密后的结果发送数据包。</li>
<li>http_simple：并非完全按照http1.1标准实现，仅仅做了一个头部的GET请求和一个简单的回应，之后依然为原协议流。</li>
<li>http_post：与http_simple绝大部分相同，区别是使用POST方式发送数据，符合http规范，欺骗性更好，但只有POST请求这种行为容易被统计分析出异常。</li>
<li>random_head（不建议使用）：开始通讯前发送一个几乎为随机的数据包，目标是让首个数据包根本不存在任何有效信息。</li>
<li>tls1.2_ticket_auth（强烈推荐）:模拟TLS1.2在客户端有session ticket的情况下的握手连接。目前为完整模拟实现，经抓包软件测试完美伪装为TLS1.2。</li>
</ul>
<h3 id="协议定义插件"><a href="#协议定义插件" class="headerlink" title="协议定义插件"></a>协议定义插件</h3><p>（类型的插件用于定义加密前的协议，通常用于长度混淆及增强安全性和隐蔽性，部分插件能兼容原协议。）</p>
<ul>
<li><p>origin：表示使用原始SS协议，此配置速度最快效率最高，适用于限制少或审查宽松的环境。否则不建议使用。</p>
</li>
<li><p>verify_deflate（不建议）：对每一个包都进行deflate压缩，数据格式为：包长度(2字节)|压缩数据流|原数据流Adler-32，此格式省略了0x78,0x9C两字节的头部。</p>
</li>
<li><p>auth_sha1（已废弃） auth_sha1_v2（已废弃）</p>
</li>
<li><p>auth_sha1_v4（不建议）：与auth_sha1对首个包进行SHA-1校验，同时会发送由客户端生成的随机客户端id(4byte)、连接id(4byte)、unix时间戳(4byte)，之后的通讯使用Adler-32作为效验码，对包长度单独校验，以抵抗抓包重放检测，使用较大的长度混淆，使用此插件的服务器与客户机的UTC时间差不能超过24小时，即只需要年份日期正确即可。能兼容原协议（需要在服务端配置为auth_sha1_v4_compatible)，支持服务端自定义参数，参数为10进制整数，表示最大客户端同时使用数。</p>
</li>
<li><p>auth_chain_a（推荐）：对首个包的认证部分进行使用Encrypt-then-MAC模式以真正免疫认证包的CCA攻击，预防各种探测和重防攻击，数据流自带RC4加密，同时此协议支持单端口多用户，不同用户之间无法解密数据，每次加密密钥均不相同</p>
<hr>
</li>
</ul>
<h2 id="混淆与协议配置建议"><a href="#混淆与协议配置建议" class="headerlink" title="混淆与协议配置建议"></a>混淆与协议配置建议</h2><p>最初设计混淆的时候只是想着伪装为看起来像正常的流量，减少被注意到的可能性而已，但实际上流量混淆衍生出了不少的黑科技用法。</p>
<table><thead><tr><th>软件和协议</th><th>运营商检测到的类型</th><th>显示地址</th></tr></thead><tbody><tr><td>SS</td><td>tcp 业务</td><td>显示服务器 ip</td></tr><tr><td>ss + http_simple（80端口）</td><td>上网（web 方式 get）</td><td>显示混淆域名</td></tr><tr><td>ssr</td><td>tcp 业务</td><td>显示服务器 ip</td></tr><tr><td>ssr + http_simple</td><td>上网（web 方式 get）</td><td>显示混淆域名</td></tr><tr><td>ssr + tls（443）</td><td>安全类网页浏览（https vpn）流量 https 链接</td><td>显示混淆域名</td></tr><tr><td>ssr + tls（非443）</td><td>网络连接（网页）https 链接</td><td>显示混淆域名</td></tr><tr><td>ipsec vpn</td><td>udp 业务</td><td>显示服务器 ip</td></tr><tr><td>v2ray</td><td>tcp 业务</td><td>显示服务器 ip</td></tr><tr><td>v2ray + tls</td><td>https 网络连接</td><td>显示证书域名</td></tr><tr ><td >nghttpx + tls</td><td >https 网络连接</td><td >显示证书域名</td></tr><tr ><td >kcptun</td><td >udp 业务</td><td >显示服务器 ip</td></tr></tbody></table>

<h3 id="关于混淆的选择"><a href="#关于混淆的选择" class="headerlink" title="关于混淆的选择"></a>关于混淆的选择</h3><p>混淆参数可根据你的设定，伪装为对任意host的访问，但破娃酱不建议填写此参数，但建议服务端节点带有域名及正确的解析，这样不需要填写参数，客户端将直接使用节点的域名作为参数。</p>
<blockquote>
<p>因为运营商已经在少数地区布置了dns验证系统『有可能是故意针对ssr』，如果发出的 http/tls 请求里的域名解析出的ip地址列表，与所连接的实际ip不一致，多次请求后就可能会把此ip加入临时黑名单。所以，如果节点有域名，那么参数不写其实是最好的，很多人都习惯写一个大公司网站的域名，其实这反而留下了一个可被检测的地方。</p>
</blockquote>
<p>虽然不建议加参数，但各地区情况不一样，大部分情况下加了参数速度更快，用的更长久，其应用主要包括以下几类：</p>
<ol>
<li>遇到运营商qos，使用混淆能提速。</li>
<li>所在网络有严格限制，仅能使用 80 或 443 端口，不认识的协议根本不能用的（如学校、公司、政府办公网络）。</li>
<li>对自己的隐私有要求的，希望在运营商的连接记录里留下看起来正常的访问记录。</li>
<li>试图绕过学校或运营商的计费系统，即免流『该部分应用较普遍，配合抓包大法可以爽歪歪』。</li>
<li>其它黑科技用途</li>
</ol>
<h3 id="http-simple"><a href="#http-simple" class="headerlink" title="http_simple"></a>http_simple</h3><div style="  border:3px solid rgb(73,177,245);border-radius: 15px;padding: 10px; ">

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">xinhuaapp-img.img.aliyuncs.com</span><br></pre></td></tr></table></figure>
<p>混淆含义：审查方将看到你正用ios 10.2.1的微信内置浏览器，在浏览某个来自国内某『和谐的』新闻客户端的多媒体内容，且该内容已cdn到国外</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mmbiz.qpic.cn#user-agent: mozilla&#x2F;5.0 (linux; android 5.0.1; samsung gt-i9502 build&#x2F;lrx22c) applewebkit&#x2F;537.36 (khtml, like gecko) samsungbrowser&#x2F;2.1 chrome&#x2F;34.0.1847.76 mobile safari&#x2F;537.36naccept: &#x2F;nconnection: keep-alive</span><br></pre></td></tr></table></figure>
<p>混淆含义：审查方将看到你正用s4的默认浏览器在浏览微信的多媒体内容，且该内容已cdn到国外</p>
</div>

<h3 id="tls1-2-ticket-auth"><a href="#tls1-2-ticket-auth" class="headerlink" title="tls1.2_ticket_auth"></a>tls1.2_ticket_auth</h3><div style="  border:3px solid rgb(73,177,245);border-radius: 15px;padding: 10px; ">

<p>这个协议对应的参数就简单了，填自己希望伪装的网址，如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">www.icloud.com,img.alicdn.com,apps.bdimg.com</span><br></pre></td></tr></table></figure>
<p>多个域名之间用英文 , 区隔，客户端会随机选择一个进行混淆伪装。</p>
</div>

<h3 id="混淆常用Host"><a href="#混淆常用Host" class="headerlink" title="混淆常用Host"></a>混淆常用Host</h3><div style="  border:3px solid rgb(73,177,245);border-radius: 15px;padding: 10px; ">

<h4 id="国外域名混淆"><a href="#国外域名混淆" class="headerlink" title="国外域名混淆"></a>国外域名混淆</h4><p>因为节点均为非大陆ip，所以合理性来说用国外混淆才是最好的伪装</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1 tse1.mm.bing.net</span><br><span class="line">2 cloudfront.com</span><br><span class="line">3 cloudflare.com</span><br><span class="line">4 itunes.apple.com</span><br><span class="line">5 www.icloud.com</span><br><span class="line">6 ajax.microsoft.com</span><br><span class="line">7 apps.bdimg.com</span><br><span class="line">8 www.bing.com</span><br></pre></td></tr></table></figure>

<h4 id="国内域名混淆"><a href="#国内域名混淆" class="headerlink" title="国内域名混淆"></a>国内域名混淆</h4><p>平常访问以下站点那个多就用那个，或定期更换。</p>
<p>部分地区运营商会取消部分免流host，<strong>具体哪个免流host适用你当地使用要自己测试。</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1 static.youku.com  #优酷</span><br><span class="line">2 static.hdslb.com  #b站</span><br><span class="line">3 item.taobao.com #淘宝</span><br><span class="line">4 m.10010.com #联通</span><br><span class="line">5 uac.10010.com #联通</span><br><span class="line">6 wap.10086.cn  #移动</span><br><span class="line">7 dl.music.189.cn #电信</span><br><span class="line">8 cdn.4g.play.cn  #电信</span><br></pre></td></tr></table></figure>
<p>PS：移动和谐的比较多，联通、电信由于各种免流业务存在，SSR免流比移动容易N倍。</p>
</div>

<h2 id="免流混淆参数获取"><a href="#免流混淆参数获取" class="headerlink" title="免流混淆参数获取"></a>免流混淆参数获取</h2><p>需要注意的是，不通的互联网套餐卡的免流参数不一样，并且可能会变。</p>
<p>也就是说，你要有免流卡才能抓到免流参数。（免流参数可以买，渠道自己找。）</p>
<p>抓包软件有两个，一个是wi.cap，一个是packet capture，但是wi.cap需要root，要求较高，所以只介绍不用root也不用框架的packet capture。</p>
<h3 id="packet-capture抓包教程"><a href="#packet-capture抓包教程" class="headerlink" title="packet capture抓包教程"></a>packet capture抓包教程</h3><ol>
<li><p>首先安装packet capture</p>
</li>
<li><p>关闭所有联网软件，打开手机流量（net和wap都可以试下）</p>
</li>
<li><p>打开packet capture</p>
</li>
<li><p>点击上方绿色三角形按钮</p>
</li>
<li><p>打开要抓包的软件（免流量软件，比如掌厅、咪咕、沃TV等），这里要根据你的套餐的免流机制来选择，例如测试卡为阿里鱼卡，优酷免流量，则选择优酷视频来抓取免流混淆参数。<br>打开优酷，随便选择一个视频打开看10分钟<strong>（注意这里必须要用手机流量而不是WiFi）</strong></p>
</li>
<li><p>返回packet capture可以看到多了很多抓包记录，点击右上角停止抓包，在每一条抓包记录（TCP记录）中找到免流混淆参数。</p>
</li>
<li><p>其中，免流混淆参数就是Host对应的字样的信息。</p>
</li>
</ol>
<p><strong>注意：不是每一条TCP都有Host，只有Host后面的才是免流混淆参数，并且优先尝试这种有软件名称的混淆参数，例如：youku.com。</strong></p>
<p>根据你的SSR服务器的信息填好基本信息后，可以在SSR客户端中设置免流参数，例如：palylog.youku.com，记得还要将路由改成全局。</p>
<p><font color="red">免流测试记得关闭网络，开关几次飞行模式，然后再用数据上网。</p>
<p>记住，SSR软件一定要保留在后台运行，不然会扣流量。</font></p>
<h2 id="混淆的正确写法"><a href="#混淆的正确写法" class="headerlink" title="混淆的正确写法"></a>混淆的正确写法</h2><p>大部分情况下用最简单的写法，即一个host，就可以了。</p>
<p>但有时候配合User-Agent和Accept等信息会有奇效，尤其是现在越来越多的定向卡需要验证手机（卡）信息的情况下。</p>
<p>要想达到像tiny那样可以被运营商系统逐行识别的效果，必须这样写：</p>
<ol>
<li><p>灰色版SSR混淆写法(即1\r\n2\r\n3)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mmsc.monternet.com\r\n</span><br><span class="line">Accept: *&#x2F;*, application&#x2F;vnd.wap.mms-message, application&#x2F;vnd.wap.sic\r\n</span><br><span class="line">Content-Type: application&#x2F;vnd.wap.mms-message\r\n</span><br><span class="line">User-Agent: Android-Mms&#x2F;2.0\nmmsc.monternet.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>粉色版SSR混淆写法(即1#2\n3)：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mmsc.monternet.com#</span><br><span class="line">Accept: *&#x2F;*, application&#x2F;vnd.wap.mms-message, application&#x2F;vnd.wap.sic\n</span><br><span class="line">Content-Type: application&#x2F;vnd.wap.mms-message\n</span><br><span class="line">User-Agent: Android-Mms&#x2F;2.0\nmmsc.monternet.com</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>抓到混淆参数，打开SSR软件填到混淆参数的输入框中，让SSR软件保留在后台。</p>
<p>百度输入“ip”回车，如果显示的是你的服务器IP即证明配置成功。</p>
<hr>
<div class="hide-block"><a class="hide-button button--primary button--animated" style="color:#fff;">翻墙用户配置建议
    </a><span class="hide-content"><h3 id="SS配置"><a href="#SS配置" class="headerlink" title="SS配置"></a>SS配置</h3><p>加密请使用 AEAD 加密，包括以下几个：<br><code>aes-128-gcm</code><br><code>aes-192-gcm</code><br><code>aes-256-gcm</code><br><code>chacha20-ietf-poly1305</code><br><code>xchacha20-ietf-poly1305</code></p><p>对于移动设备来说，ARM v8 以后的 CPU 使用aes-gcm的效率要高于chacha20，因此更推荐使用<code>aes-256-gcm</code><br>混淆请使用<code>plain</code>，或者使用<code>http_simple</code></p><h3 id="SSR配置"><a href="#SSR配置" class="headerlink" title="SSR配置"></a>SSR配置</h3><p>加密请使用<code>none</code><br>协议请使用<code>chain_a</code><br>混淆请使用<code>plain</code>或者<code>http_simple</code></p><h5 id="混淆问题：为什么不用tls"><a href="#混淆问题：为什么不用tls" class="headerlink" title="混淆问题：为什么不用tls"></a>混淆问题：为什么不用tls</h5><p>国外的VPS不太建议使用<code>tls1.2_ticket_auth</code>混淆（即便协议插件文档强里烈建议使用tls混淆），这样可能会被墙。<br>PS：大部分被墙的都是用了tls混淆，猜测GFW可能已经掌握了tls混淆的特征。</p><blockquote><p>而且 tls 混淆原本的用途只是为了突破部分地区的网络环境才有的 QoS 限制，一般情况下根本不需要使用。<br>破娃酱也在文档里说的很明白，一切因使用混淆而产生的看似是网络加速了的效果都是因为绕过了限制，混淆实际上会减慢你的网络速度。</p></blockquote><h5 id="加密问题：为什么用none"><a href="#加密问题：为什么用none" class="headerlink" title="加密问题：为什么用none"></a>加密问题：为什么用none</h5><p>如果是在N年前，你用非 AEAD 加密，都存在被主动探测到的风险，但SSR里破娃酱在设计协议的时候已经考虑到了主动探测问题并且针对这块进行了设计。<br>因此目前来说还是相对安全的，<strong>前提是你使用的是chain_a或auth_aes128_md5或auth_aes128_sha1协议。</strong></p><p>就目前来说<code>chain_a</code>是目前最佳的协议。</p><p>auth_chain系列协议已经自带了RC4加密，针对 UDP 部分也有加密及长度混淆，因此一般情况下是不需要再进行额外的加密。<br>如果你觉得RC4加密有安全隐患，可以再套一层其他加密。</p></span></div>

<hr>
<h1 id="常见问题解决方案——参考"><a href="#常见问题解决方案——参考" class="headerlink" title=" 常见问题解决方案——参考 "></a><center> 常见问题解决方案——参考 </center></h1><blockquote>
<ul>
<li>用了一段时间后发现SSR账号用不了了。</li>
</ul>
</blockquote>
<p>这种情况一般是国外的VPS才会发生，先ping以下IP，ping不通就是被墙了，这种情况一般SSH也连不上，解决方法就是重新部署一个新的服务器。<br>PS：一般的vps服务商可能会提供免费更换1次ip的服务。</p>
<blockquote>
<ul>
<li>刚搭建好的SSR账号，IP能ping通，但是还是用不了。</li>
</ul>
</blockquote>
<p>首选排除杀毒软件的干扰，尤其是国产杀毒软件，比如360安全卫生、360杀毒软件、腾讯管家、金山卫生等。<br>这些东西很容易干扰翻墙上网，如果你的电脑安装了这样的东西，建议至少翻墙时别用，最好卸载。<br>其次，检查下SSR信息是否填写正确。浏览器的代理方式是否是ssr代理，即（HTTP）127.0.0.1和1080。<br>如果以上条件都排除，还是用不了，那么可以更换端口、加密方式、协议、混淆，或者更换服务器位置。<br>另外，如果你的vps服务器配置的是SSR账号，即有协议和混淆且没有兼容原版（SS版），那么你必须使用SSSR客户端来使用账号，因为SS客户端没有填写协议和混淆的选项。</p>
<p>有的地区需要把混淆参数设置成plain才好用。因为混淆不总是有效果，要看各地区的策略，有时候不混淆（plain）让其看起来像随机数据更好。</p>
<blockquote>
<ul>
<li>电脑能用但手机用不了。</li>
</ul>
</blockquote>
<p>如果你的手机用的是SS客户端，SS客户端没有填协议和混淆的地方，如果你部署的协议和混淆的时候没有选择兼容原版（SS版），因此手机是用不了的。这个时候你把协议弄成兼容原版、混淆也设置成兼容原版即可。或者直接将协议设置成origin且混淆设置成plain。</p>
<blockquote>
<ul>
<li>SSR账号连不上。</li>
</ul>
</blockquote>
<p>vps的服务器操作系统不要用的太高，太高可能会因为系统的防火墙问题导致搭建的SSR账号连不上，如果你用的centos系统，建议用centos6。</p>
<p>如果你跟我用的操作系统一样是CentOS 7，建议你关掉防火墙。<br><strong>顺带提一句，如果你是阿里云用户，先去安全组放行端口。</strong></p>
<blockquote>
<ul>
<li>关于流量计算</li>
</ul>
</blockquote>
<p>VPS流量计算分为单向和双向，单向流量计算对于用户来说更实惠。<br>因为在vps服务器上部署SSR服务端后，SSR服务端就相当于中转，比如我们看一个视频，必然会产生流量。<br>假设消耗流量80M，那么VPS服务器会产生上传80M和下载80M流量，如果是单向计算，只需要80M流量，如果是双向计算流量，那么会计算为160M流量。</p>
<p>国内的，像阿里云是单向计费，其他的服务商不清楚。</p>
<p>国外的VPS服务商，比如vultr服务商提供的vps服务器是单向流量计算，而且vultr服务器每月有流量限制，超过限制后服务器不会被停止运行，但是超出的流量会被额外收费。</p>
<p>北美和西欧地区的服务器超出流量后，多出的部分收费为0.01美元/G。新加坡和日本东京（日本）为0.025美元/G，悉尼（澳大利亚）为0.05美元/G。把vultr服务器删掉，开通新的服务器，流量会从0开始重新计算。</p>
<p>如果要退款，直接在后台点击support，选择open ticket新开一个工单，选择billing question财务问题，简单的在文本框输入你的退款理由。<br>比如：Please refund all the balance in my account。工单提交以后一般很快就可以给你确认退款，若干个工作日后就会退回你的支付方式。（全额退款结束后，账号可能会被删除）<br>如果英语水平不好，还是想和客服进行交流，可以用百度在线翻译，自动中文转英文和英文转中文。</p>
<blockquote>
<ul>
<li>账号使用相关</li>
</ul>
</blockquote>
<p>如果你想把搭建的账号给多人使用，不用额外设置端口，因为一个账号就可以多人使用。</p>
<p>如果想实现支持每个用户(端口)不同的加密方式/协议/混淆等，并且管理流量使用，可以参考多用户配置脚本：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget -N --no-check-certificate https:&#x2F;&#x2F;softs.fun&#x2F;Bash&#x2F;ssrmu.sh &amp;&amp; chmod +x ssrmu.sh &amp;&amp; bash ssrmu.sh </span><br><span class="line"></span><br><span class="line">备用脚本：</span><br><span class="line">wget -N --no-check-certificate https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;ToyoDAdoubi&#x2F;doubi&#x2F;master&#x2F;ssrmu.sh &amp;&amp; chmod +x ssrmu.sh &amp;&amp; bash ssrmu.sh</span><br></pre></td></tr></table></figure>

<p>安装后管理命令为：bash ssrmu.sh<br>注意：这个多用户配置脚本和教程内容的脚本无法共存！要想用这个脚本，把之前的脚本卸载，输入管理命令bash ssr.sh ，选择3，卸载ShadowsocksR即可卸载原脚本。</p>
<blockquote>
<ul>
<li>其他需求</li>
</ul>
</blockquote>
<p>路由器也可以配置ss/ssr账号，详见百度。</p>
<p>电脑想用搭建的ss/ssr账号玩游戏，即实现类似VPN全局代理，可以用SSTAP，详见百度。</p>
<h1 id="SSR加速方案"><a href="#SSR加速方案" class="headerlink" title=" SSR加速方案 "></a><center> SSR加速方案 </center></h1><p>加速方案推荐BBR加速。参考自<a href="https://www.cnblogs.com/xingchong/p/9874696.html" target="_blank" rel="noopener">锐速与BBR的原理简单解析</a></p>
<p>简略的说就是，锐速<strong>可能</strong>会加大流量消耗，而BBR<strong>相对来说</strong>绿色环保。</p>
<h2 id="方案一：锐速加速（仅支持KVM-Xen-vmare架构）"><a href="#方案一：锐速加速（仅支持KVM-Xen-vmare架构）" class="headerlink" title="方案一：锐速加速（仅支持KVM,Xen,vmare架构）"></a>方案一：锐速加速（仅支持KVM,Xen,vmare架构）</h2><p>锐速对内核要求严格，要想在自己的VPS安装锐速，首先内核必须要匹配锐速版本。如果内核不支持安装锐速，请先更换内核。</p>
<p>PS：<br>因为Centos 7小问题比较多，锐速针对centos 7的版版本较少，肯定要降级使用。<br>个人推荐在CentOS 6中安装，但是这里提供的版本比较老。<br>所以想要新版本的自己去查锐速支持列表，下载对应的内核版本就行了。</p>
<p>总而言之，直接换内核就完事了。</p>
<blockquote>
<p>更换内核</p>
</blockquote>
<p>Centos6 ×64（逐步运行）:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rpm -ivh http:&#x2F;&#x2F;wget.ca&#x2F;Kernel&#x2F;kernel-firmware-2.6.32-504.3.3.el6.noarch.rpm</span><br><span class="line"></span><br><span class="line">rpm -ivh http:&#x2F;&#x2F;wget.ca&#x2F;Kernel&#x2F;kernel-2.6.32-504.3.3.el6.x86_64.rpm –force</span><br><span class="line"></span><br><span class="line">reboot</span><br><span class="line"></span><br><span class="line">uname -r（如出现2.6.32-504.3.3.el6即证明更换内核成功）</span><br></pre></td></tr></table></figure>
<p>Centos7 ×64（逐步运行）:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rpm -ivh http:&#x2F;&#x2F;wget.ca&#x2F;Kernel&#x2F;kernel-3.10.0-229.1.2.el7.x86_64.rpm –force</span><br><span class="line"></span><br><span class="line">reboot</span><br><span class="line"></span><br><span class="line">uname -r（如出现3.10.0-229.1.2.el7.x86_64即证明更换内核成功）</span><br></pre></td></tr></table></figure>

<blockquote>
<p>安装锐速</p>
</blockquote>
<p>（centos6 64位）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;wget.ca&#x2F;Sh&#x2F;Serverspeeder&#x2F;rscentos&amp;&amp;sh rscentos</span><br></pre></td></tr></table></figure>
<p>（centos7 64位）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;wget.ca&#x2F;Sh&#x2F;Serverspeeder&#x2F;rscentos7&amp;&amp;sh rscentos7</span><br></pre></td></tr></table></figure>
<blockquote>
<p>锐速常用命令</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">启动：&#x2F;serverspeeder&#x2F;bin&#x2F;serverSpeeder.sh start</span><br><span class="line"></span><br><span class="line">停止：&#x2F;serverspeeder&#x2F;bin&#x2F;serverSpeeder.sh stop</span><br><span class="line"></span><br><span class="line">状态：service serverSpeeder status</span><br><span class="line"></span><br><span class="line">检查是否有appex0模块：lsmod</span><br></pre></td></tr></table></figure>
<h2 id="方案二：BBR加速（仅支持KVM-Xen-vmare架构，且不可与锐速共存）"><a href="#方案二：BBR加速（仅支持KVM-Xen-vmare架构，且不可与锐速共存）" class="headerlink" title="方案二：BBR加速（仅支持KVM,Xen,vmare架构，且不可与锐速共存）"></a>方案二：BBR加速（仅支持KVM,Xen,vmare架构，且不可与锐速共存）</h2><p>BBR是Google开源的一套内核加速算法，相对于锐速，BBR优化的更多的是TCP的丢包。</p>
<p>PS：个别服务商的VPS安装BBR可能会卡。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget --no-check-certificate https:&#x2F;&#x2F;github.com&#x2F;teddysun&#x2F;across&#x2F;raw&#x2F;master&#x2F;bbr.sh</span><br><span class="line"></span><br><span class="line">chmod +x bbr.sh</span><br><span class="line"></span><br><span class="line">.&#x2F;bbr.sh</span><br></pre></td></tr></table></figure>
<p>装完后需要重启系统，输入y即可立即重启服务器，如果输入y提示command not found ，接着输入reboot来重启服务器，确保加速生效，bbr加速脚本是开机自动启动，装一次就可以了。</p>
<p>服务器重启成功并重新连接服务器后，输入命令<code>lsmod | grep bbr</code> ，如果出现tcp_bbr字样表示bbr已安装并启动成功。</p>
<p>或者输入<code>sysctl net.ipv4.tcp_available_congestion_control</code>，如果返回值为：<code>net.ipv4.tcp_available_congestion_control = bbr cubic reno</code> 只要后面有bbr，则表示启动成功。</p>
<h2 id="其余方案"><a href="#其余方案" class="headerlink" title="其余方案"></a>其余方案</h2><p> （具体方法，自行百度or谷歌。）</p>
<ol>
<li>NetSpeed（支持KVM、OVZ）</li>
<li>KCPTun</li>
<li>FinalSpeed（仅支持电脑，不支持手机）</li>
</ol>
<hr>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title=" 参考文章 "></a><center> 参考文章 </center></h1><p><a href="https://blog.csdn.net/oscer2016/article/details/54883255" target="_blank" rel="noopener">详解全局免流原理(转载)</a><br><a href="https://www.zhihu.com/question/33318951" target="_blank" rel="noopener">靠手机软件免流是真的吗？什么原理？</a><br><a href="https://blog.csdn.net/weixin_44946150/article/details/102934625" target="_blank" rel="noopener">2019最新ssr免流必备抓包方法及混淆写法</a><br><a href="https://www.syshy.net/20180519/ssr/" target="_blank" rel="noopener">正确的翻墙姿势-SS&amp;SSR</a><br><a href="http://blog.52mtr.cn/?post=31" target="_blank" rel="noopener">SSR混淆及混淆协议参数的设置</a></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Lange Heris</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://langeheris.github.io/2020/05/01/ssr/">http://langeheris.github.io/2020/05/01/ssr/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://langeheris.github.io" target="_blank">Soul Stream</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%99%E7%A8%8B/">教程</a><a class="post-meta__tags" href="/tags/SSR/">SSR</a><a class="post-meta__tags" href="/tags/VPN/">VPN</a></div><div class="post_share"><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e6242594a819b56" async="async"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/01/JS01/"><img class="prev_cover lazyload" data-src="https://pic1.zhimg.com/80/v2-de3eb27e42922de0349502656d5055b8_720w.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JavaScript 继承模式 数组去重 深度克隆</div></div></a></div><div class="next-post pull_right"><a href="/2020/04/17/Git/"><img class="next_cover lazyload" data-src="https://pic4.zhimg.com/80/v2-a690a54642386717e0a176e96d47d838_720w.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git 版本控制</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/03/07/Hexo-Create/" title="Hexo搭建"><img class="relatedPosts_cover lazyload"data-src="https://pic2.zhimg.com/80/v2-abfe485a0a58cfed11ccf03fd7634657_720w.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-07</div><div class="relatedPosts_title">Hexo搭建</div></div></a></div><div class="relatedPosts_item"><a href="/2020/03/28/Intranet-penetration/" title="内网穿透——NPS"><img class="relatedPosts_cover lazyload"data-src="https://pic1.zhimg.com/80/v2-801f11f4b2bf9a7061965ac94bc8c9bb_720w.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-28</div><div class="relatedPosts_title">内网穿透——NPS</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  appId: 'k8wl1SQ3KAzoDHfqRbgfOUX2-gzGzoHsz',
  appKey: 'IKiKisGyg2hHzwX42e0xRDRw',
  placeholder: '来说点什么吧......',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  mathjax: false
});</script></div></article></main><footer id="footer" style="background-image: url(https://preview.cloud.189.cn/image/imageAction?param=3FACB5AA38B71CC5DFE2A77DC43B4266BBE9D6CA9EF96D92198785668003BD9198A8346D80D115C35A64A898A06030023CE6F88CCF1D7ED630F6E1EADB14067DA4F3CCEFB60BF8B6C0CB0073590482D4D5B9CB1FDEE63568F84B3523)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Lange Heris</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">到底了...</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/search/local-search.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/shizuku.model.json"},"display":{"position":"left","width":100,"height":200},"mobile":{"show":"flase"},"react":{"opacity":0.7},"log":false});</script></body></html>